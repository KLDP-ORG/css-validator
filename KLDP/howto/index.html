<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>CSS 검사 서비스 다운로드와 설치</title>
  <link rev="made" href="mailto:www-validator-css@w3.org" />
  <link rev="start" href="./" title="Home Page" />
  <style type="text/css" media="all">
    @import "../style/base.css";  
    @import "../style/docs.css";
    @import "./style/howto.css";
  </style>
</head>

<body>
<div id="banner">
    <h1 id="title"><a href="http://www.w3.org/"><img alt="W3C" width="110" height="61" id="logo" src="../images/w3c.png" /></a>
    <a href="../"><span>CSS 검사 서비스</span></a></h1>
    <p id="tagline">
        캐스케이딩 스타일시트 (CSS)와 스타일시트를 포함한 문서를 검사
    </p>
</div>

<div class="doc">
<h2>Operation CSS Validator on your machine with TOMCAT</h2>

<p>
    이 문서는 CSS-Validator 를 local server 에서 직접 운영을 하기 위하여 CSS-Validator
    소스를 받아서 설치하여 운영을 하기 위한 자료입니다. 이 문서는 2018년 12월 11일자 Github
    CSS-Validator master revision(<a href="https://github.com/w3c/css-validator/tree/445f7d9">@445f7d9</a>)
    소스와 tomcat 7, openjdk 1.8을 기준으로 설명 합니다.
</p>

<p>
    이 문서는 CentOS 7 에서 css-validator 를 설치 운영하는 방법을 설명하고 있습니다. jdk와
    tomcat 등을 직접 설치하시는 분들은 <a href="install-manual.html">manual install</a> 문서를
    참고 하십시오.
</p>

<p>
    이 문서는 <a href="http://oops.org/">김정균</a>에 의하여 작성이 되었으며, 자유롭게
    사용하여도 무방합니다.
</p>

<ol class="hcontents">
    <li><a href="#package">Java Pacakage</a></li>
    <li><a href="#req">Requirement</a></li>
    <li><a href="#build">Build</a></li>
    <li><a href="#confirm">Confirm</a></li>
    <li><a href="#problems">Problems</a></li>
</ol>

<a name="package"></a>
<h3>1. Java Pcakage</h3>
<p>
    이곳에서 배포하는 CSS validator package 는 현재 KLDP 에서 운영 중인 버전(Github <a href="https://github.com/w3c/css-validator/tree/445f7d9">@445f7d9</a>) 이며, openjdk 1.8 로 빌드 되었습니다.
</p>

<p>
    빌드가 귀찮다면, 아래 빌드 과정을 생략하고 다음의 jar 패키지를 이용할 수 있습니다. (권장 합니다.)
</p>

<p>
    <a href="css-validator.jar">css-validator.jar</a>
</p>

<a name="req"></a>
<h3>2. Requirement</h3>

    나열된 버전은 빌드 및 운영 테스트를 검증한 버전 입니다.<br/><br/>

    <ol class="hcontents">
    <li><span class="sec">css-validator source:</span><br />
        <ul>
            <li>W3C css-validator GITHUB repository: 
               <a href="https://github.com/w3c/css-validator/archive/master.zip">
               https://github.com/w3c/css-validator/archive/master.zip</a></li>
            <li>KLDP css-validator repository:
               <a href="https://github.com/KLDP-ORG/css-validator/archive/kldp.zip">
               https://github.com/KLDP-ORG/css-validator/archive/kldp.zip</a></li>
            </li>
        </ul>
        <br />
    </li>
    <li><span class="sec">Tomcat WebServer:</span><br />
        yum install tomcat
        <br /><br />
    </li>

    <li><span class="sec">ant (css-build 를 위해 필요):</span><br />
        yum install ant
        <br /><br />
    </li>
    <li><span class="sec">JDK:</span><br />
        yum install java-1.8.0-openjdk-headless
        <br /><br />
    </li>
    </ol>

    미리 빌드를 해 놓은 jar package 를 사용하려면 ant 는 설치하지 않아도 됩니다. 단, jar 패키지에서
    css-validator.kldp.org 의 리소스를 참조하기 때문에, private 환경에서 운영하려면 소스에서 css-validator.kldp.org
    와 www.w3.org 를 참조하는 부분을 수정 하셔서 사용하는 것이 좋습니다.

<a name="build"></a>
<h3>3. Build</h3>
    <ol class="hcontents">
    <li><span class="sec">openjdk 1.8 Installation:</span><br /><br />
        <span class="shell">shell&gt;</span> yum install java-1.8.0-openjdk-headless<br /><br />
    </li>
    <li><span class="sec">ant Installation:</span><br /><br />
        <span class="shell">shell&gt;</span> yum install ant<br /><br />
    </li>
    <li><span class="sec">Tomcat Installation:</span><br /><br />
        <span class="shell">shell&gt;</span> yum install tomcat<br /><br />
    </li>
    <li><span class="sec">css-validation build</span><br /><br />

        tomcat의 webapps 디렉토리에 css-validation의 소스를 받아 놓습니다. tomcat 을 yum으로 설치 했다면
        <strong>/var/lib/tomcat/webapps</strong> 에 소스를 설치 합니다.<br /><br />

        <span class="shell">[root@open css-validator]#</span> cd /var/lib/tomcat/webapps<br />
        <span class="shell">[root@open css-validator]#</span> git clone https://github.com/KLDP-ORG/css-validator.git<br />
        <span class="shell">[root@open css-validator]#</span> cd css-validator<br /><br />


        소스를 다운로드 받은 후, localizing 을 위하여 문자열 치환을 합니다. validator.kldp.org 와 css-validator.kldp.org
        도메인을 참조하는 URL들이 많이 있습니다. 그러므로, grep -r kldp 명령을 이용하여 적당한 URL로 치환 하시기
        바랍니다. 굳이 필요 없다면 그냥 참조해도 무방 합니다.<br /><br />

        다음은, build 를 위한 사전 준비 입니다.<br /><br />

        <span class="shell">[root@open css-validator]#</span> mkdir -p WEB-INF/lib<br />
        <span class="shell">[root@open css-validator]#</span> ln -sf WEB-INF/lib lib<br />
        <span class="shell">[root@open css-validator]#</span> [ -f "./build" -a -d "./build" ] &amp;&amp; rm -rf ./build<br /><br />

        ant로 빌드를 합니다.<br /><br />

        <span class="shell">[root@open css-validator]#</span> ant build<br />
        <div style="white-space: pre">
        Buildfile: /var/lib/tomcat/webapps/css-validator/build.xml

        prepare.check:

        prepare:
            [mkdir] Created dir: /var/lib/tomcat/webapps/css-validator/tmp
              [get] Getting: https://repo1.maven.org/maven2/org/w3c/jigsaw/jigsaw/2.2.6/jigsaw-2.2.6.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/jigsaw-2.2.6.jar
              [get] Getting: https://repo1.maven.org/maven2/commons-beanutils/commons-beanutils/1.9.3/commons-beanutils-1.9.3.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/commons-beanutils-1.9.3.jar
              [get] Getting: https://repo1.maven.org/maven2/commons-collections/commons-collections/3.2.2/commons-collections-3.2.2.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/commons-collections-3.2.2.jar
              [get] Getting: https://repo1.maven.org/maven2/commons-digester/commons-digester/1.8.1/commons-digester-1.8.1.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/commons-digester-1.8.1.jar
              [get] Getting: https://repo1.maven.org/maven2/commons-lang/commons-lang/2.6/commons-lang-2.6.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/commons-lang-2.6.jar
              [get] Getting: https://repo1.maven.org/maven2/org/apache/commons/commons-text/1.3/commons-text-1.3.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/commons-text-1.3.jar
              [get] Getting: https://repo1.maven.org/maven2/commons-logging/commons-logging/1.1.3/commons-logging-1.1.3.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/commons-logging-1.1.3.jar
              [get] Getting: https://repo1.maven.org/maven2/org/apache/velocity/velocity/1.7/velocity-1.7.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/velocity-1.7.jar
              [get] Getting: https://repo1.maven.org/maven2/org/apache/velocity/velocity-tools/2.0/velocity-tools-2.0.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/velocity-tools-2.0.jar
              [get] Getting: https://repo1.maven.org/maven2/xerces/xercesImpl/2.11.0/xercesImpl-2.11.0.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/xercesImpl-2.11.0.jar
              [get] Getting: https://repo1.maven.org/maven2/xml-apis/xml-apis/1.4.01/xml-apis-1.4.01.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/xml-apis-1.4.01.jar
              [get] Getting: https://repo1.maven.org/maven2/org/ccil/cowan/tagsoup/tagsoup/1.2.1/tagsoup-1.2.1.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/tagsoup-1.2.1.jar
              [get] Getting: http://repo1.maven.org/maven2/org/mortbay/jetty/servlet-api/2.5-6.0.1/servlet-api-2.5-6.0.1.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/servlet-api-2.5-6.0.1.jar
              [get] Getting: https://repo1.maven.org/maven2/nu/validator/htmlparser/1.4.9/htmlparser-1.4.9.jar
              [get] To: /var/lib/tomcat/webapps/css-validator/tmp/htmlparser-1.4.9.jar
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib
             [copy] Copying 1 file to /var/lib/tomcat/webapps/css-validator/lib

        build:
            [mkdir] Created dir: /var/lib/tomcat/webapps/css-validator/build
            [javac] Compiling 1410 source files to /var/lib/tomcat/webapps/css-validator/build
            [javac] warning: [options] bootstrap class path not set in conjunction with -source 1.7
            [javac] Note: /var/lib/tomcat/webapps/css-validator/org/w3c/css/parser/analyzer/CssParser.java uses or overrides a deprecated API.
            [javac] Note: Recompile with -Xlint:deprecation for details.
            [javac] Note: Some input files use unchecked or unsafe operations.
            [javac] Note: Recompile with -Xlint:unchecked for details.
            [javac] 1 warning
            [copy] Copying 122 files to /var/lib/tomcat/webapps/css-validator/build

        BUILD SUCCESSFUL
        Total time: 7 seconds
        </div>
        <span class="shell">[root@open css-validator]#</span><br /><br />

        빌드가 성공적으로 되면, 외와 같이 WEB-INF/lib 에 필요한 library들을 다운로드 받고,
        빌드된 java 파일들이 build/ 에 저장이 됩니다.<br /></br />

        빌드된 obejct들을 tomcat에 loading을 시키도록 합니다.<br /><br />

        <span class="shell">[root@open css-validator]#</span> mkdir -p WEB-INF/classes<br />
        <span class="shell">[root@open css-validator]#</span> mv build/org/ WEB-INF/classes/ <br />
        <span class="shell">[root@open css-validator]#</span> cp -af web.xml WEB-INF/<br />
        <span class="shell">[root@open css-validator]#</span> rm -rf build lib tmp<br /><br />
    </li>
    <li><span class="sec">Tomcat Execute</span><br /><br />
        <span class="shell">[root@open css-validator]#</span> service tomcat start<br /><br />
        <strong>/etc/tomcat/server.xml</strong> 설정은 D.I.Y 하도록 합니다.<br /><br />
    </li>
    <li><span class="sec">apache + mod_jk</span><br /><br />
        D.I.Y<br /><br />
    </li>
    </ol>

<a name="confirm"></a>
<h3>4. 확인</h3>

<p>
    다음 URL로 확인을 해 보도록 합니다.<br /><br />

    http://server:8080/css-validator/<br />
    http://server:8080/css-validator/validaotr?uri=http://domain<br /><br />

    포트 번호는 tomcat 설정에 따라 달라질 수 있습니다.
</p>

<a name="problems"></a>
<h3>5. 문제점</h3>
    <ol>
    <li>한글이 깨질 경우,  server.xml 의 AJP/1.3 설정을 주석 처리 해 줘 보십시오.</li>
    </ol>
    <pre>
    &lt;!-- Define an AJP 1.3 Connector on port 8009 --&gt;
    &lt;!-- Don't use for css-validator hangul broken
    &lt;Connector port="8009" 
               enableLookups="false" redirectPort="8443" protocol="AJP/1.3" /&gt;
    --&gt;
</pre>
</div>

<ul class="navbar"  id="menu">
        <li><strong><a href="../" title="Home page for the W3C CSS Validation Service">홈</a></strong> <span class="hideme">|</span></li>
        <li><a href="../about.html" title="About this service">About</a> <span class="hideme">|</span></li>
 
        <li><a href="../documentation.html" title="Documentation for the W3C CSS Validation Service">문서</a> <span class="hideme">|</span></li>
        <li><a href="../Email.html" title="How to provide feedback on this service">피드백</a> <span class="hideme">|</span></li>
        <li><a href="../thanks.html" title="Credits and Acknowlegments">공헌</a><span class="hideme">|</span></li>
 
</ul>

<div id="footer">
        <p id="activity_logos">
                <a href="http://www.w3.org/QA/" title="W3C's Quality Assurance Activity, bringing you free Web quality tools and more"><img src="http://validator.kldp.org/QA/2002/12/qa-small.png" alt="QA" /></a><a href="http://www.w3.org/Style/CSS/learning" title="Learn more about Cascading Style Sheets"><img src="../images/woolly-icon.png" alt="CSS" /></a>
        </p>
        <p id="support_logo">
                <a href="http://www.w3.org/QA/Tools/Donate">
                <img src="http://validator.kldp.org/QA/Tools/I_heart_validator" alt="I heart Validator logo" title=" Validators Donation Program" />
                </a>
        </p>

        <p class="copyright">
                <a rel="Copyright" href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> &copy; 1994-2009
                <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a>&reg;

                (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>,
                <a href="http://www.ercim.org/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>,
                <a href="http://www.keio.ac.jp/">Keio</a>),
                All Rights Reserved.
                W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
                <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>,
                <a rel="Copyright" href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>
                and <a rel="Copyright" href="http://www.w3.org/Consortium/Legal/copyright-software">software licensing</a>

                rules apply. Your interactions with this site are in accordance
                with our <a href="http://www.w3.org/Consortium/Legal/privacy-statement#Public">public</a> and
                <a href="http://www.w3.org/Consortium/Legal/privacy-statement#Members">Member</a> privacy
                statements.
        </p>
</div>

</body>

<!--
 * vim: softtabstop=4
 * vim: tabstop=4
 * vim: shiftwidth=4
 * vim: expandtab
-->
</html>
